(()=>{"use strict";class e{constructor(e,t){this.length=e,this.health=e,this.sunk=!1,this.id=t}hit(){this.health--,this.isSunk()}isSunk(){0===this.health&&(this.sunk=!0)}}new e(3,0);let t,o,a,c=!1,i=0;class r{constructor(e){this.name=e,this.playerShips=[],this.createPlayerShips()}createPlayerShips(){const t=new e(5,1),o=new e(4,2),a=new e(3,3),c=new e(3,4),i=new e(2,5);this.playerShips.push(t,o,a,c,i)}placePlayerShips(e){let t="vertical";document.querySelector(".toggle-button").addEventListener("click",(()=>{t="vertical"===t?"horizontal":"vertical"})),document.querySelectorAll(".board-piece").forEach((o=>{o.addEventListener("click",(()=>{const a=o.getAttribute("data-x"),r=o.getAttribute("data-y");console.log(`x: ${a}, y: ${r}`);const l=e[a][r];console.log(l),function(e,t,o,a){const{length:i}=e,{id:r}=e;if("vertical"===a){if(o.x+e.length>7||t[o.x+e.length-1][o.y].occupied||!0===o.occupied)return c=!1,void alert("Ship will not fit on board");o.occupied=!0,o.shipId=r;for(let e=1;e<i;e+=1){const a=t[o.x+e][o.y];a.occupied=!0,a.shipId=r}c=!0}if("horizontal"===a){if(o.y+e.length>7||t[o.x][o.y+e.length-1].occupied||!0===o.occupied)return c=!1,void alert("Ship will not fit on board");o.occupied=!0,o.shipId=r;for(let e=1;e<i;e+=1){const a=t[o.x][o.y+e];a.occupied=!0,a.shipId=r}c=!0}}(this.playerShips[i],e,l,t),function(e){e.forEach((e=>{e.forEach((e=>{e.occupied&&document.querySelector(`[data-x="${e.x}"][data-y="${e.y}"]`).classList.add("occupied")}))}))}(e),i>=5||c&&i++})),o.addEventListener("mouseover",(e=>{e.target.classList.add("hover");const a=o.getAttribute("data-x"),c=o.getAttribute("data-y");for(let e=1;e<this.playerShips[i].length;e++)"horizontal"===t?document.querySelector(`[data-x="${a}"][data-y="${Number(c)+e}"]`).classList.add("hover"):document.querySelector(`[data-x="${Number(a)+e}"][data-y="${c}"]`).classList.add("hover")})),o.addEventListener("mouseout",(e=>{e.target.classList.remove("hover");const a=o.getAttribute("data-x"),c=o.getAttribute("data-y");for(let e=1;e<this.playerShips[i].length;e++)"horizontal"===t?document.querySelector(`[data-x="${a}"][data-y="${Number(c)+e}"]`).classList.remove("hover"):document.querySelector(`[data-x="${Number(a)+e}"][data-y="${c}"]`).classList.remove("hover")}))}))}}class l{constructor(e,t){this.hit=!1,this.miss=!1,this.occupied=!1,this.x=e,this.y=t,this.shipId=null}receiveAttack(){this.hit=!0}}function s(e){const t=[];for(let e=0;e<7;e++)for(let o=0;o<7;o++)t[e]=[];for(let e=0;e<7;e++)for(let o=0;o<7;o++)t[e][o]=new l(e,o);if("player"==e){const e=document.querySelector(".gameboard");for(let t=0;t<7;t++)for(let o=0;o<7;o++){const a=document.createElement("div");a.classList.add("board-piece"),a.setAttribute("data-x",t),a.setAttribute("data-y",o),e.appendChild(a)}}else{const e=document.querySelector(".computer-gameboard");for(let t=0;t<7;t++)for(let o=0;o<7;o++){const a=document.createElement("div");a.classList.add("board-piece"),a.setAttribute("data-x",t),a.setAttribute("data-y",o),e.appendChild(a)}}return t}function n(e,t){const o=[].concat.apply([],t),a=o.filter((t=>t.y<=7-e.length));console.log("ðŸš€ ~ file: gameboard-factory.js ~ line 118 ~ randomlyPlaceShip ~ horizontalAvailablePieces",a);const c=o.filter((t=>t.x<=7-e.length));console.log("ðŸš€ ~ file: gameboard-factory.js ~ line 120 ~ randomlyPlaceShip ~ verticalAvailablePieces",c);const i=Math.random()<.5?"horizontal":"vertical",r="horizontal"===i?a[Math.floor(Math.random()*a.length)]:c[Math.floor(Math.random()*c.length)];if(r.occupied=!0,r.shipId=e.id,console.log("selected piece",r),"vertical"===i)for(let o=0;o<e.length;o++)t[r.x+o][r.y].occupied=!0,t[r.x+o][r.y].shipId=e.id;if("horizontal"===i)for(let o=0;o<e.length;o++)t[r.x][r.y+o].occupied=!0,t[r.x][r.y+o].shipId=e.id}new l(0,0).occupied=!0,document.querySelector("body").onload=function(c){o=s("player"),t=new r("Test Player"),t.placePlayerShips(o),a=s("computer"),function(t){const o=[new e(5,1),new e(4,2),new e(3,3),new e(3,4),new e(2,5)];for(let e=0;e<o.length;e++)n(o[e],t);console.log("computer gameboard after ships placed",t)}(a);const i=document.querySelector(".computer-gameboard");a.forEach((e=>{e.forEach((e=>{e.occupied&&i.querySelector(`[data-x="${e.x}"][data-y="${e.y}"]`).classList.add("occupied")}))}))}(),console.log(t),console.log("player",o),console.log(a)})();