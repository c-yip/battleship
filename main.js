(()=>{"use strict";class t{constructor(t,e){this.length=t,this.health=t,this.sunk=!1,this.id=e}hit(){this.health--,this.isSunk()}isSunk(){0===this.health&&(this.sunk=!0)}}new t(3,0);let e,o,i,r=!1,a=0;class c{constructor(t){this.name=t,this.playerShips=[],this.createPlayerShips()}createPlayerShips(){const e=new t(5,1),o=new t(4,2),i=new t(3,3),r=new t(3,4),a=new t(2,5);this.playerShips.push(e,o,i,r,a)}placePlayerShips(t){let e="vertical";document.querySelector(".toggle-button").addEventListener("click",(()=>{e="vertical"===e?"horizontal":"vertical"})),document.querySelectorAll(".board-piece").forEach((o=>{o.addEventListener("click",(()=>{const i=o.getAttribute("data-x"),c=o.getAttribute("data-y");console.log(`x: ${i}, y: ${c}`);const l=t[i][c];console.log(l),function(t,e,o,i){const{length:a}=t,{id:c}=t;if("vertical"===i){if(o.x+t.length>7||e[o.x+t.length-1][o.y].occupied||!0===o.occupied)return r=!1,void alert("Ship will not fit on board");o.occupied=!0,o.shipId=c;for(let t=1;t<a;t+=1){const i=e[o.x+t][o.y];i.occupied=!0,i.shipId=c}r=!0}if("horizontal"===i){if(o.y+t.length>7||e[o.x][o.y+t.length-1].occupied||!0===o.occupied)return r=!1,void alert("Ship will not fit on board");o.occupied=!0,o.shipId=c;for(let t=1;t<a;t+=1){const i=e[o.x][o.y+t];i.occupied=!0,i.shipId=c}r=!0}}(this.playerShips[a],t,l,e),function(t){t.forEach((t=>{t.forEach((t=>{t.occupied&&document.querySelector(`[data-x="${t.x}"][data-y="${t.y}"]`).classList.add("occupied")}))}))}(t),a>=5||r&&a++})),o.addEventListener("mouseover",(t=>{t.target.classList.add("hover");const i=o.getAttribute("data-x"),r=o.getAttribute("data-y");for(let t=1;t<this.playerShips[a].length;t++)"horizontal"===e?document.querySelector(`[data-x="${i}"][data-y="${Number(r)+t}"]`).classList.add("hover"):document.querySelector(`[data-x="${Number(i)+t}"][data-y="${r}"]`).classList.add("hover")})),o.addEventListener("mouseout",(t=>{t.target.classList.remove("hover");const i=o.getAttribute("data-x"),r=o.getAttribute("data-y");for(let t=1;t<this.playerShips[a].length;t++)"horizontal"===e?document.querySelector(`[data-x="${i}"][data-y="${Number(r)+t}"]`).classList.remove("hover"):document.querySelector(`[data-x="${Number(i)+t}"][data-y="${r}"]`).classList.remove("hover")}))}))}}class l{constructor(t,e){this.hit=!1,this.miss=!1,this.occupied=!1,this.x=t,this.y=e,this.shipId=null}receiveAttack(){this.hit=!0}}function s(t){const e=[];for(let t=0;t<7;t++)for(let o=0;o<7;o++)e[t]=[];for(let t=0;t<7;t++)for(let o=0;o<7;o++)e[t][o]=new l(t,o);if("player"==t){const t=document.querySelector(".gameboard");for(let e=0;e<7;e++)for(let o=0;o<7;o++){const i=document.createElement("div");i.classList.add("board-piece"),i.setAttribute("data-x",e),i.setAttribute("data-y",o),t.appendChild(i)}}else{const t=document.querySelector(".computer-gameboard");for(let e=0;e<7;e++)for(let o=0;o<7;o++){const i=document.createElement("div");i.classList.add("board-piece"),i.setAttribute("data-x",e),i.setAttribute("data-y",o),t.appendChild(i)}}return e}function n(t,e){const o=[].concat.apply([],e),i=o.filter((e=>e.y<=7-t.length)),r=o.filter((e=>e.x<=7-t.length)),a=Math.random()<.5?"horizontal":"vertical",c="horizontal"===a?i[Math.floor(Math.random()*i.length)]:r[Math.floor(Math.random()*r.length)];if(c.occupied=!0,c.shipId=t.id,"vertical"===a)for(let o=0;o<t.length;o++)e[c.x+o][c.y].occupied=!0,e[c.x+o][c.y].shipId=t.id;if("horizontal"===a)for(let o=0;o<t.length;o++)e[c.x][c.y+o].occupied=!0,e[c.x][c.y+o].shipId=t.id}new l(0,0).occupied=!0,document.querySelector("body").onload=function(r){o=s("player"),e=new c("Test Player"),e.placePlayerShips(o),i=s("computer"),function(e){const o=[new t(5,1),new t(4,2),new t(3,3),new t(3,4),new t(2,5)];for(let t=0;t<o.length;t++)n(o[t],e)}(i);const a=document.querySelector(".computer-gameboard");i.forEach((t=>{t.forEach((t=>{t.occupied&&a.querySelector(`[data-x="${t.x}"][data-y="${t.y}"]`).classList.add("occupied")}))}))}(),console.log(e),console.log("computer",i)})();